{% extends 'todo/base.html' %}
{% block title %}My Tasks{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3>Your Tasks</h3>
  <a href="{% url 'task_create' %}" class="btn btn-primary">+ Add Task</a>
</div>

<form method="GET" class="d-flex mb-3">
  <input type="text" name="q" class="form-control me-2" placeholder="Search..." value="{{ search_query }}">
  <button class="btn btn-outline-secondary">Search</button>
</form>

<div class="mb-3">
  <a href="?filter=all" class="btn btn-sm btn-outline-dark {% if not request.GET.filter or request.GET.filter == 'all' %}active{% endif %}">All</a>
  <a href="?filter=pending" class="btn btn-sm btn-outline-warning {% if request.GET.filter == 'pending' %}active{% endif %}">Pending</a>
  <a href="?filter=completed" class="btn btn-sm btn-outline-success {% if request.GET.filter == 'completed' %}active{% endif %}">Completed</a>
</div>

<ul class="list-group">
  {% for task in tasks %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
      <div>
        {% if task.complete %}
          <span class="text-success"><i class="bi bi-check-circle-fill"></i></span>
          <s>{{ task.title }}</s>
        {% else %}
          {{ task.title }}
        {% endif %}
        <small class="text-muted d-block">{{ task.description }}</small>
      </div>
      <div>
        <a href="{% url 'task_update' task.id %}" class="btn btn-sm btn-outline-primary">Edit</a>
        <a href="{% url 'task_delete' task.id %}" class="btn btn-sm btn-outline-danger">Delete</a>
      </div>
    </li>
  {% empty %}
    <li class="list-group-item">No tasks found.</li>
  {% endfor %}
</ul>
{% endblock %}
